"use strict";var Se=(e,t)=>()=>(e&&(t=e(e=0)),t);var y=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var u=Se(()=>{});var A=y(g=>{"use strict";u();Object.defineProperty(g,"__esModule",{value:!0});g.Method=void 0;var Oe;(function(e){e[e.loadFile=0]="loadFile",e[e.saveFile=1]="saveFile",e[e.loadJson=2]="loadJson",e[e.loadJsonComments=3]="loadJsonComments",e[e.saveJson=4]="saveJson",e[e.loadBuffer=5]="loadBuffer",e[e.saveBuffer=6]="saveBuffer"})(Oe=g.Method||(g.Method={}))});var C=y(_=>{"use strict";u();var K=_&&_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_,"__esModule",{value:!0});_.checkPerm=_.checkPath=_.checkDir=_.checkPathSync=void 0;var h=K(require("fs")),Y=K(require("path")),Pe=e=>!e.includes("\\")&&!e.includes("/")?e.includes("."):(0,_.checkDir)(e)==!0;_.checkPathSync=Pe;var ge=e=>{let t=Y.default.parse(e),r=t.dir;return r==""||h.default.existsSync(r)||h.default.mkdirSync(t.dir,{recursive:!0}),!!h.default.existsSync(r)};_.checkDir=ge;var Ae=async e=>!e.includes("\\")&&!e.includes("/")?e.includes("."):!((0,_.checkDir)(e)!=!0||await(0,_.checkPerm)(e)!=!0);_.checkPath=Ae;var ke=async e=>{let t=Y.default.parse(e);return h.default.existsSync(e)&&await h.default.promises.access(e,h.default.constants.R_OK|h.default.constants.W_OK).catch(()=>{throw new Error("Permissions error")}),await h.default.promises.access(t.dir,h.default.constants.R_OK|h.default.constants.W_OK).catch(()=>{throw new Error("Permissions error")}),!0};_.checkPerm=ke});var W=y(k=>{"use strict";u();var je=k&&k.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r};Object.defineProperty(k,"__esModule",{value:!0});var De=require("worker_threads"),be=e=>{var{callback:t}=e,r=je(e,["callback"]);return new Promise((s,n)=>{let i;new De.Worker("./build/worker.js").once("message",a=>i=a).once("exit",a=>a==0?s(i):n(a)).once("error",a=>n(a)).once("messageerror",a=>n(a)).postMessage(r)}).then(s=>(t==null||t(s),s),s=>{throw new Error(s)})};k.default=be});var ee=y(j=>{"use strict";u();var Z=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(j,"__esModule",{value:!0});var z=Z(require("fs")),G=A(),Q=C(),V=Z(W()),qe={load:async(e,t)=>{if(await(0,Q.checkPath)(e)==!0){let r=await z.default.promises.readFile(e);return t==null||t(r),r}else throw new Error(`Can't read from ${e}`)},save:async(e,t,r)=>{if(await(0,Q.checkPath)(e)==!0)await z.default.promises.writeFile(e,t),r==null||r();else throw new Error(`Can't write to ${e}`)},loadW:async(e,t)=>{let r=await(0,V.default)({method:G.Method.loadBuffer,path:e});return t==null||t(Buffer.from(r)),Buffer.from(r)},saveW:async(e,t,r)=>{let s=new Uint8Array(new SharedArrayBuffer(t.byteLength));s.set(t),await(0,V.default)({method:G.Method.saveBuffer,path:e,data:s,callback:r})}};j.default=qe});var R=y(D=>{"use strict";u();var se=D&&D.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(D,"__esModule",{value:!0});var F=se(require("fs")),te=A(),T=C(),re=se(W()),Ee={loadS:e=>{if((0,T.checkPathSync)(e)==!0)return F.default.readFileSync(e,"utf8");throw new Error(`Can't read from ${e}`)},saveS:(e,t)=>{if((0,T.checkPathSync)(e)==!0)F.default.writeFileSync(e,t,"utf8");else throw new Error(`Can't write to ${e}`)},load:async(e,t)=>{if(await(0,T.checkPath)(e)==!0){let r=await F.default.promises.readFile(e,"utf8");return t==null||t(r),r}else throw new Error(`Can't read from ${e}`)},save:async(e,t,r)=>{if(await(0,T.checkPath)(e)==!0)await F.default.promises.writeFile(e,t,"utf8"),r==null||r();else throw new Error(`Can't write to ${e}`)},loadW:(e,t)=>(0,re.default)({method:te.Method.loadFile,path:e,callback:t}),saveW:(e,t,r)=>(0,re.default)({method:te.Method.saveFile,path:e,data:t,callback:r})};D.default=Ee});var x=y(b=>{"use strict";u();var ae=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(b,"__esModule",{value:!0});var B=A(),O=ae(R()),ne=ae(W()),Me={loadS:(e,t=!1)=>JSON.parse(t?ie(O.default.loadS(e)):O.default.loadS(e)),saveS:(e,t)=>O.default.saveS(e,JSON.stringify(t)),load:async(e,t,r=!1)=>{let s=JSON.parse(r?ie(await O.default.load(e)):await O.default.load(e));return t==null||t(s),s},save:async(e,t,r)=>{await O.default.save(e,JSON.stringify(t)),r==null||r()},loadW:(e,t,r=!1)=>(0,ne.default)({method:r?B.Method.loadJsonComments:B.Method.loadJson,path:e,callback:t}),saveW:(e,t,r)=>(0,ne.default)({method:B.Method.saveJson,path:e,data:t,callback:r})};b.default=Me;function ie(e){let t=(o,v)=>{let f=0;for(;o[v]==="\\";)v--,f++;return!(f%2)},r=!1,s=!1,n=!1,i=0,a="";for(let o=0;o<e.length;o++){let v=e[o]||"",f=e[o+1]||"",d=!(n||s);if(d&&v==='"'&&t(e,o-1)&&(r=!r),r)continue;let S=v+f;if(d&&S==="//")a+=e.slice(i,o),i=o,s=!0,o++;else if(s&&S===`\r
`){o++,s=!1,i=o;continue}else if(s&&v===`
`)s=!1,i=o;else if(d&&S==="/*"){a+=e.slice(i,o),i=o,n=!0,o++;continue}else if(n&&S==="*/"){o++,n=!1,i=o+1;continue}}return(a+(n||s?"":e.slice(i))).replace(/,(?!\s*?[{["'\w])/g,"")}});var de=y(M=>{"use strict";u();var X=M&&M.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(M,"__esModule",{value:!0});var q=X(require("fs")),l=X(require("path")),ce=X(require("os"));function Je(e){let t=Object.assign({cwd:process.cwd(),relative:!0},typeof e=="string"?{cwd:e}:e),r=[],s=t.cwd,n,i=!1;do if(s.charAt(0)==="~"&&(s=fe(s)),s.charAt(0)==="@"&&(s=l.default.join(oe||(oe=E?l.default.resolve(c||(c=ue()),"node_modules"):l.default.resolve(c||(c=ue()),"lib/node_modules")),s.slice(1))),n=le(s),n){let a=t.relative?l.default.relative(t.cwd,n):n;i=r.indexOf(a)>-1,i||(r.push(a),s=l.default.join(n,"../../"))}while(n&&!i);return r}M.default=Je;function le(e){let t=l.default.resolve(e,"node_modules"),r=q.default.existsSync(t)?l.default.resolve(t):null;if(r)return r;let s=l.default.dirname(e);return s===e?null:le(s)}var oe,c;function ue(){if(process.env.PREFIX)c=process.env.PREFIX;else if(c=$(l.default.resolve(ce.default.homedir(),".npmrc")),!c){try{c=$(l.default.resolve(We(),"..","..","npmrc")),c&&(c=$(l.default.resolve(c,"etc","npmrc"))||c)}catch{}c||(E?c=process.env.APPDATA?l.default.join(process.env.APPDATA,"npm"):l.default.dirname(process.execPath):(c=l.default.dirname(l.default.dirname(process.execPath)),process.env.DESTDIR&&(c=l.default.join(process.env.DESTDIR,c))))}return c?fe(c):""}function $(e){var t;try{return(t=Ce(q.default.readFileSync(e,"utf-8")))===null||t===void 0?void 0:t.prefix}catch{return null}}function Ce(e){let t=Object.create(null),r=t,s=null;for(let i of e.split(/[\r\n]+/g)){if(!i||i.match(/^\s*[;#]/))continue;let a=i.match(/^\[([^\]]*)\]$|^([^=]+)(=(.*))?$/i);if(!a)continue;if(a[1]!==void 0){if(s=U(a[1]),s==="__proto__"){r=Object.create(null);continue}r=t[s]=t[s]||Object.create(null);continue}let o=U(a[2]||""),v=o.length>2&&o.slice(-2)==="[]",f=v?o.slice(0,-2):o;if(f==="__proto__")continue;let d=a[3]?U(a[4]||""):!0,S=d==="true"||d==="false"||d==="null"?JSON.parse(d):d;v&&(Object.hasOwnProperty.call(r,f)?Array.isArray(r[f])||(r[f]=[r[f]]):r[f]=[]),Array.isArray(r[f])?r[f].push(S):r[f]=S}let n=[];for(let i of Object.keys(t)){if(!Object.hasOwnProperty.call(t,i)||typeof t[i]!="object"||Array.isArray(t[i]))continue;let a=i.replace(/\1/g,"LITERAL\\1LITERAL").replace(/\\\./g,"").split(/\./).map(d=>d.replace(/\1/g,"\\.").replace(/\2LITERAL\\1LITERAL\2/g,"")),o=t,v=a.pop()||"",f=v.replace(/\\\./g,".");for(let d of a)d!=="__proto__"&&((!Object.hasOwnProperty.call(o,d)||typeof o[d]!="object")&&(o[d]=Object.create(null)),o=o[d]);o===t&&f===v||(o[f]=t[i],n.push(i))}return n.forEach(i=>delete t[i]),t}function U(e){e=e.trim();let t=e.charAt(0),r=e.charAt(e.length-1);if(t==='"'&&r==='"'||t==="'"&&r==="'"){e=t==="'"?e.substr(1,e.length-2):e;try{return JSON.parse(e)}catch{}}else{let s=!1,n="";for(let i=0;i<e.length;i++){let a=e.charAt(i);if(s)"\\;#".indexOf(a)!==-1?n+=a:n+="\\"+a,s=!1;else{if(";#".indexOf(a)!==-1)break;a==="\\"?s=!0:n+=a}}return s&&(n+="\\"),n.trim()}return e}var fe=e=>e.charAt(0)==="~"?e.charAt(1)==="+"?l.default.join(process.cwd(),e.slice(2)):l.default.join(ce.default.homedir(),e.slice(1)):e,E=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys";function We(){let e=(process.env.PATH||"").split(E?";":":"),t=[""];E&&(e.unshift(process.cwd()),t=(process.env.PATHEXT||".EXE;.CMD;.BAT;.COM").split(";"));for(let r of e){let s=l.default.join(r.charAt(0)==='"'&&r.slice(-1)==='"'?r.slice(1,-1):r,"npm");for(let n of t)if(Fe(s+n))return q.default.realpathSync(s+n)}throw new Error("Can't find npm file")}function Fe(e){try{return(E?t=>{let r=q.default.statSync(t);if(!r.isSymbolicLink()&&!r.isFile())return!1;if(!process.env.PATHEXT)return!0;let s=process.env.PATHEXT.split(";");if(s.indexOf("")!==-1)return!0;for(let n of s){let i=n.toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}:t=>{let{mode:r,gid:s,uid:n,isFile:i}=q.default.statSync(t);return i()&&(r&1||r&2&&s===process.getgid()||r&4&&n===process.getuid()||r&6&&process.getuid()===0)})(e)}catch{return!1}}});var ve=y(J=>{"use strict";u();var _e=J&&J.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(J,"__esModule",{value:!0});var w=_e(require("fs")),Te=_e(de()),I=C(),Re={mkS:e=>{(0,I.checkPathSync)(e)&&w.default.mkdirSync(e,{recursive:!0})},rmS:e=>{(0,I.checkPathSync)(e)&&(process.versions.node.startsWith("12")?w.default.rmdirSync(e,{recursive:!0}):w.default.rmSync(e,{recursive:!0,force:!0}))},checkS:e=>w.default.existsSync(e),mk:async(e,t)=>{await(0,I.checkPath)(e)&&await w.default.promises.mkdir(e,{recursive:!0}),t==null||t()},rm:async(e,t)=>{await(0,I.checkPath)(e)&&(process.versions.node.startsWith("12")?await w.default.promises.rmdir(e,{recursive:!0}):await w.default.promises.rm(e,{recursive:!0,force:!0})),t==null||t()},check:async(e,t)=>{let r=w.default.existsSync(e);return t==null||t(r),r},nodeModules:e=>(0,Te.default)(e)};J.default=Re});var ye=y(L=>{"use strict";u();var he=L&&L.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(L,"__esModule",{value:!0});var m=he(R()),P=he(x());String.load=m.default.load;String.save=m.default.save;String.loadS=m.default.loadS;String.saveS=m.default.saveS;String.loadW=m.default.loadW;String.saveW=m.default.saveW;String.prototype.save=async function(e,t){await m.default.save(e,String(this),t)};String.prototype.saveS=function(e){m.default.saveS(e,String(this))};String.prototype.saveW=async function(e,t){await m.default.saveW(e,String(this),t)};JSON.load=P.default.load;JSON.save=P.default.save;JSON.loadS=P.default.loadS;JSON.saveS=P.default.saveS;JSON.loadW=P.default.loadW;JSON.saveW=P.default.saveW});u();var N=exports&&exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});exports.Method=exports.Buf=exports.File=exports.Dir=exports.Json=void 0;var pe=N(ee());exports.Buf=pe.default;var H=N(R());exports.File=H.default;var me=N(x());exports.Json=me.default;var we=N(ve());exports.Dir=we.default;ye();var Ie=Object.assign({json:me.default,file:H.default,dir:we.default,buf:pe.default},H.default);exports.default=Ie;var Le=A();Object.defineProperty(exports,"Method",{enumerable:!0,get:function(){return Le.Method}});
